## 从输入url到页面展示到底发生了什么

 ### 1. 用户输入一个地址

浏览器会从历史记录或者书签等地方，去智能匹配可能对应的url

### 2. 根据输入的域名查找对应的IP
    
本地host文件 -> 本地DNS服务器 -> 根DNS服务器(告诉本地DNS服务器，向域服务器发请求) -> 域服务器 (告诉本地DNS服务器，向域名的解析服务器发请求) ->域名的解析服务器(得到域名和IP地址对应关系，本地DNS反回结果给客户端的同时，并缓存)
### 3. 浏览器向 web 服务器发送一个 HTTP 请求

拿到域名对应的IP地址之后，浏览器会以一个随机端口（1024<端口<65535）向服务器的WEB程序（常用的有httpd,nginx等）80端口发起TCP的连接请求


#### 知识扩展：TCP三次握手:
- 第一次握手：客户端发送syn包(syn=j)到服务器，并进入SYN_SEND状态，等待服务器确认；
- 第二次握手：服务器收到syn包，必须确认客户的SYN（ack=j+1），同时自己也发送一个SYN包（syn=k），即SYN+ACK包，此时服务器进入SYN_RECV状态；
- 第三次握手：客户端收到服务器的SYN＋ACK包，向服务器发送确认包ACK(ack=k+1)，此包发送完毕，客户端和服务器进入ESTABLISHED状态，完成三次握手。

### 4. 服务器可能会做重定向响应

 #### 知识扩展： 301和302的区别。

301和302状态码都表示重定向，就是说浏览器在拿到服务器返回的这个状态码后会自动跳转到一个新的URL地址，这个地址可以从响应的Location首部中获取（用户看到的效果就是他输入的地址A瞬间变成了另一个地址B）——这是它们的共同点。

他们的不同在于。301表示旧地址A的资源已经被永久地移除了（这个资源不可访问了），搜索引擎在抓取新内容的同时也将旧的网址交换为重定向之后的网址；

302表示旧地址A的资源还在（仍然可以访问），这个重定向只是临时地从旧地址A跳转到地址B，搜索引擎会抓取新的内容而保存旧的网址。 SEO302好于301

### 5. 如果服务器做了重定向响应，浏览器跟踪重定向地址
### 6. 服务器处理请求
### 7. 服务器返回一个 HTTP 响应　
#### 知识扩展： 状态码

- 1xx：信息性状态码，表示服务器已接收了客户端请求，客户端可继续发送请求。
- 2xx：成功状态码，表示服务器已成功接收到请求并进行处理。

        200 OK 表示客户端请求成功

- 3xx：重定向状态码，表示服务器要求客户端重定向。

        301 Moved Permanently 永久性重定向
        302 Found 临时性重定向
        304 Not Modified 服务器内容没更新，可以读取缓存

- 4xx：客户端错误状态码，表示客户端的请求有非法内容。

        401 Unauthonzed 表示请求未经授权，比如需要验证登录，未登录请求时
        403 Forbidden 表示服务器收到请求，但是拒绝提供服务  比如：权限不通过
        404 Not Found 请求资源不存在

- 5xx：服务器错误状态码，表示服务器未能正常处理客户端的请求而出现意外错误。

        502 Bad Gateway
        504 Gateway Time-out

### 8. 浏览器显示 HTML

